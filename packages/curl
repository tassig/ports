package_name=curl
package_version=7.47.1
tarball_suffix=bz2
url=http://curl.haxx.se/download/
build_dependencies="zlib libressl"
iscustombuild=1


custombuild(){
	package_fullname=$package_name-$package_version
	package_tarball_name=$package_fullname.tar.$tarball_suffix
	wget $url/$package_tarball_name
	tar xvf $package_tarball_name
	cd $package_fullname/
	export CFLAGS=-O2
	export PERL=""
	./configure --prefix=/opt/$package_fullname/ SSL_LIBS="-lssl -lcrypto"
	make
	make install
	ln -s /opt/$package_fullname /opt/$package_name
	ln -s /opt/$package_name/bin/* /bin/
	ln -s /opt/$package_name/lib/* /usr/lib/ # TODO: is this needed? Yes, git prefers to link with libcurl
	ln -s /opt/$package_name/include/* /usr/local/include/ # TODO: is this needed? Yes, the same..
	cd ..
}
