package_name=openbox
package_version=3.6.1
tarball_suffix=xz
url=http://openbox.org/dist/openbox/$package_name-$package_version.tar.$tarball_suffix
build_dependencies="glib pango libxml2"
iscustombuild=1

# custom build because xorg headers not found automatically by this build system
custombuild(){
	set -ex
	package_fullname=$package_name-$package_version
	wget -O archive $url
	tar xvf archive
	rm archive
	cd $package_name*
	
	autoreconf
	
	./configure --prefix=/opt/$package_fullname/ LDFLAGS="-Wl,-rpath=/opt/zlib/lib"   #TODO: make sure why zlib doesn't end in rpath
	make -j
	make check
	make install
	ln -sv /opt/$package_fullname /opt/$package_name
	ln -sv /opt/$package_name/bin/* /bin/ || true   # don't crash if the links are already there
	ln -sv /opt/$package_name/lib/pkgconfig/* /opt/pkgconf/lib/pkgconfig/   || true
	cd ..
	set +ex
}