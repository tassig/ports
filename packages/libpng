package_name=libpng
package_version=1.6.21
tarball_suffix=xz
url=http://mirrors.tassig.com/libpng/libpng-1.6.21.tar.xz
build_dependencies=pkgconf
iscustombuild=1

custombuild(){
	package_fullname=$package_name-$package_version
	package_tarball_name=$package_fullname.tar.$tarball_suffix
	rm $package_tarball_name
	wget $url
	tar xvf $package_tarball_name
	cd $package_fullname/
	
	export LDFLAGS=-L/opt/zlib/lib
	export CCPFLAGS=-I/opt/zlib/include
	make -j check
	make install
	
	#ln -sv /opt/$package_fullname/lib/libpng16.so /opt/$package_fullname/lib/libpng16.so.16   # missing .so file
	ln -sv /opt/$package_fullname /opt/$package_name
	ln -sv /opt/$package_name/bin/* /bin/
	ln -svf /opt/libpng/lib/pkgconfig/* /opt/pkgconf/lib/pkgconfig/
	cd ..
}
