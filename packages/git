package_name=git
package_version=2.7.3
tarball_suffix=xz
url=https://www.kernel.org/pub/software/scm/git/
build_dependencies="zlib libressl curl"
iscustombuild=1

# this is a minimal version of git for bootstrapping purposes
# it lacks some features essential to git, however it's able to clone repositories, which is all we need for bootstrapping
# TODO: this package should be renamed git-minimal, the real git package shouldn't have these restrictions

# TODO: git with http or https doesn't work, it doesn't seem to use curl. It doesn't really matter for bootstrapping purposes

custombuild(){
	package_fullname=$package_name-$package_version
	package_tarball_name=$package_fullname.tar.$tarball_suffix
	wget $url/$package_tarball_name
	tar xvf $package_tarball_name
	cd $package_fullname/
	./configure --prefix=/opt/$package_fullname
	make CFLAGS=" -g -O2 -Wall" CURLDIR="/opt/curl" NO_PERL=1 NO_TCLTK=1 NO_GETTEXT=1 install
	ln -s /opt/$package_fullname /opt/$package_name
	ln -s /opt/$package_name/bin/* /bin/
	cd ..
}