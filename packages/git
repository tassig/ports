package_name=git
package_version=2.7.3
tarball_suffix=xz
url=https://www.kernel.org/pub/software/scm/git/
build_dependencies="zlib libressl curl"
iscustombuild=1

# TODO: git with http or https doesn't work, it doesn't seem to use curl

custombuild(){
	package_fullname=$package_name-$package_version
	package_tarball_name=$package_fullname.tar.$tarball_suffix
	wget $url/$package_tarball_name
	tar xvf $package_tarball_name
	cd $package_fullname/
	./configure prefix=/opt/$package_fullname 
	make V=1 CFLAGS="-O2 -Wall -Wextra" CURL_LIBCURL="-lcurl -lssl -lcrypto" PROFILE=build NO_PERL=YesPlease NO_EXPAT=YesPlease NO_TCLTK=YesPlease NO_GETTGIT_TAREXT=YesPlease NO_SVN_TESTS=YesPlease BLK_SHA1=YesPlease NO_ICONV=YesPlease NO_PYTHON=YesPlease NO_GETTEXT=YesPlease NO_INSTALL_HARDLINKS=YesPlease NO_SYS_POLL_H=YesPlease HAVE_DEV_TTY=YesPlease DEFAULT_HELP_FORMAT=html
	make V=1 CFLAGS="-O2 -Wall -Wextra" CURL_LIBCURL="-lcurl -lssl -lcrypto" PROFILE=build NO_PERL=YesPlease NO_EXPAT=YesPlease NO_TCLTK=YesPlease NO_GETTGIT_TAREXT=YesPlease NO_SVN_TESTS=YesPlease BLK_SHA1=YesPlease NO_ICONV=YesPlease NO_PYTHON=YesPlease NO_GETTEXT=YesPlease NO_INSTALL_HARDLINKS=YesPlease NO_SYS_POLL_H=YesPlease HAVE_DEV_TTY=YesPlease DEFAULT_HELP_FORMAT=html install
	ln -s /opt/$package_fullname /opt/$package_name
	ln -s /opt/$package_name/bin/* /bin/
	cd ..
}