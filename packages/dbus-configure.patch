--- a/configure.ac
+++ b/configure.ac
@@ -899,13 +899,15 @@
 
 #### Sort out XML library
 
-AC_CHECK_LIB(expat, XML_ParserCreate_MM,
+PKG_CHECK_MODULES([XML], [expat], [], 
+  [
+    AC_CHECK_LIB(expat, XML_ParserCreate_MM,
              [ AC_CHECK_HEADERS(expat.h, [],
                                 [AC_MSG_ERROR([Could not find expat.h, check config.log for failed attempts])]) ],
              [ AC_MSG_ERROR([Explicitly requested expat but expat not found]) ])
-
-XML_LIBS=-lexpat
-XML_CFLAGS=
+    XML_LIBS=-lexpat
+    XML_CFLAGS=
+  ])
 AC_SUBST([XML_CFLAGS])
 AC_SUBST([XML_LIBS])
 
