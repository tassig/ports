package_name=wget
package_version=1.17
tarball_suffix=xz
url=http://mirrors.tassig.com/wget/wget-1.17.tar.xz
build_dependencies=
iscustombuild=1

# TODO: wget being a GNU project, it's surprising that flags for libressl are needed, since libressl supports pkg-config and libtool. Check the configure.ac script of wget to see what's going on, possibly fix
custombuild() {
	wget $url
	tar xvf wget-$package_version.tar.$tarball_suffix
	rm wget-$package_version.tar.$tarball_suffix
	cd wget-$package_version

	export LDFLAGS="-Wl,-rpath=/opt/libressl/lib -Wl,-rpath=/opt/zlib/lib"
	./configure --prefix=/opt/wget-$package_version --with-ssl=openssl
	make -j -i   # ignoring all errors
#	make -j check
	make -i install
	ln -sv /opt/wget-$package_version /opt/wget
	ln -sfv /opt/wget/bin/* /bin/
	cd ..
}
